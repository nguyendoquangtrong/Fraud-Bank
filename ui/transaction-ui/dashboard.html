<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <title>FraudBank Dashboard</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="styles.css" />
</head>
<body>
  <div class="container">
    <!-- Header -->
    <header class="header">
      <div class="header-content">
        <div class="header-title">
          <h1>üè¶ FraudBank Dashboard</h1>
          <p class="subtitle">H·ªá th·ªëng gi√°m s√°t giao d·ªãch th·ªùi gian th·ª±c</p>
        </div>
        <div class="header-info">
          <div class="info-card">
            <span class="info-label">API Endpoint</span>
            <code id="apiBaseLbl" class="info-value"></code>
          </div>
          <div class="info-card">
            <span class="info-label">Gi·ªõi h·∫°n</span>
            <span id="limit" class="info-value">1000</span>
          </div>
        </div>
      </div>
    </header>

    <!-- Status Bar -->
    <div class="status-bar">
      <div class="status-left">
        <span class="badge" id="modeBadge">Live</span>
        <span class="stat" id="stat">ƒêang t·∫£i...</span>
      </div>
      <button class="btn btn-icon" id="btnGoLive" title="Tr·ªü v·ªÅ ch·∫ø ƒë·ªô realtime">
        <span class="icon">‚Ü∫</span> Realtime
      </button>
    </div>

    <!-- Quick Filter -->
    <div class="filter-section">
      <div class="quick-filter card">
        <div class="filter-header">
          <h3>üîç L·ªçc nhanh</h3>
        </div>
        <input 
          id="filter" 
          type="search" 
          class="search-input"
          placeholder="T√¨m ki·∫øm theo TransactionId, Account, Tr·∫°ng th√°i..." 
        />
      </div>

      <!-- Advanced Filters -->
      <form id="searchForm" class="advanced-filter card">
        <div class="filter-header">
          <h3>‚öôÔ∏è B·ªô l·ªçc n√¢ng cao</h3>
        </div>
        
        <div class="filter-grid">
          <div class="form-group">
            <label>Tr·∫°ng th√°i</label>
            <select id="qStatus" name="status">
              <option value="">-- T·∫•t c·∫£ --</option>
              <option>REQUESTED</option>
              <option>SCORED</option>
              <option>DECIDED_REVIEW</option>
              <option>DECIDED_ALLOW</option>
              <option>DECIDED_BLOCK</option>
              <option>LEDGER_APPLIED</option>
              <option>REVIEWED_APPROVE</option>
              <option>REVIEWED_REJECT</option>
            </select>
          </div>

          <div class="form-group">
            <label>T√†i kho·∫£n g·ª≠i</label>
            <input id="qFrom" name="fromAccount" type="text" placeholder="123-xxx" />
          </div>

          <div class="form-group">
            <label>T√†i kho·∫£n nh·∫≠n</label>
            <input id="qTo" name="toAccount" type="text" placeholder="456-yyy" />
          </div>

          <div class="form-group">
            <label>T·ª´ th·ªùi ƒëi·ªÉm</label>
            <input id="qStart" name="startDate" type="datetime-local" />
          </div>

          <div class="form-group">
            <label>ƒê·∫øn th·ªùi ƒëi·ªÉm</label>
            <input id="qEnd" name="endDate" type="datetime-local" />
          </div>

          <div class="form-group">
            <label>S·ªë l∆∞·ª£ng</label>
            <input id="qSize" name="size" type="number" min="1" max="5000" value="100" />
          </div>
        </div>

        <div class="filter-actions">
          <button class="btn btn-primary" id="btnSearch" type="submit">
            üîé T√¨m ki·∫øm
          </button>
          <button class="btn btn-secondary" id="btnClear" type="button">
            ‚úñ Xo√° b·ªô l·ªçc
          </button>
          <span id="searchInfo" class="search-feedback"></span>
        </div>
      </form>
    </div>

    <!-- Data Table -->
    <div class="table-container card">
      <div class="table-wrapper">
        <table id="grid">
          <thead>
            <tr>
              <th>Th·ªùi gian</th>
              <th>Transaction ID</th>
              <th>T·ª´</th>
              <th>ƒê·∫øn</th>
              <th class="text-right">S·ªë ti·ªÅn</th>
              <th>Tr·∫°ng th√°i</th>
              <th class="text-right">R·ªßi ro</th>
              <th>Quy·∫øt ƒë·ªãnh</th>
              <th class="text-center">Thao t√°c</th>
            </tr>
          </thead>
          <tbody id="rows"></tbody>
        </table>
      </div>
    </div>

    <!-- Review Panel -->
    <div id="reviewPanel" class="review-panel card hidden">
      <div class="panel-header">
        <h2>üìã Duy·ªát giao d·ªãch th·ªß c√¥ng</h2>
        <button type="button" class="btn-close" id="reviewCancel" aria-label="ƒê√≥ng">√ó</button>
      </div>

      <div class="panel-summary">
        <div class="summary-item">
          <span class="summary-label">Transaction ID:</span>
          <code id="reviewTxId"></code>
        </div>
        <div class="summary-item">
          <span class="summary-label">Tr·∫°ng th√°i:</span>
          <span id="reviewStatus" class="summary-value"></span>
        </div>
        <div class="summary-item">
          <span class="summary-label">S·ªë ti·ªÅn:</span>
          <span id="reviewAmount" class="summary-value"></span>
        </div>
        <div class="summary-item">
          <span class="summary-label">Lu·ªìng ti·ªÅn:</span>
          <span id="reviewAccounts" class="summary-value"></span>
        </div>
      </div>

      <form id="reviewForm">
        <div class="form-group">
          <label>H√†nh ƒë·ªông</label>
          <div class="radio-group">
            <label class="radio-label">
              <input type="radio" name="action" value="APPROVE" checked />
              <span>‚úì Duy·ªát (APPROVE)</span>
            </label>
            <label class="radio-label">
              <input type="radio" name="action" value="REJECT" />
              <span>‚úó T·ª´ ch·ªëi (REJECT)</span>
            </label>
          </div>
        </div>

        <div class="form-group">
          <label for="reviewedBy">Ng∆∞·ªùi duy·ªát <span class="required">*</span></label>
          <input 
            id="reviewedBy" 
            name="reviewedBy" 
            type="text" 
            autocomplete="off" 
            placeholder="Nh·∫≠p t√™n ng∆∞·ªùi duy·ªát" 
            required 
          />
        </div>

        <div class="form-group">
          <label for="reviewNote">Ghi ch√∫</label>
          <textarea 
            id="reviewNote" 
            name="note" 
            placeholder="L√Ω do / ghi ch√∫ (tu·ª≥ ch·ªçn)"
            rows="4"
          ></textarea>
        </div>

        <div class="panel-footer">
          <button type="submit" class="btn btn-primary" id="reviewSubmit">
            üì§ G·ª≠i k·∫øt qu·∫£
          </button>
          <span id="reviewFeedback" class="feedback-message"></span>
        </div>
      </form>
    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@microsoft/signalr@8.0.0/dist/browser/signalr.min.js"></script>
  <script src="app_dashboard.js"></script>
</body>
</html>